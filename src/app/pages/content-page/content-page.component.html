<main class="container">
  <section class="hero">
    <div class="hero-kicker">/kb • index: warming</div>
    <h1 class="hero-title">{{ title }}</h1>
    <p class="hero-subtitle" *ngIf="subtitle">{{ subtitle }}</p>
  </section>

  <section class="bento" style="padding-top: 10px;">
    <div class="tile span-6">
      <h2 class="tile-title">
        <span class="tile-badge">index</span>
        Published Posts
      </h2>
      <p class="tile-desc">Posts show up here only after they are published.</p>
    </div>

    <div class="tile span-6">
      <h2 class="tile-title">
        <span class="tile-badge">url</span>
        Shareable Links
      </h2>
      <p class="tile-desc">Each post gets a stable URL: `/p/&lt;slug&gt;`.</p>
    </div>
  </section>

  <section class="post-grid" *ngIf="posts.length > 0">
    <a class="card" *ngFor="let post of pagePosts" [routerLink]="['/p', post.slug]">
      <div class="thumb" *ngIf="post.coverImage as img">
        <img [src]="img.dataUrl" alt="" />
      </div>
      <div class="card-body">
        <div class="card-title">{{ post.title }}</div>
        <div class="card-excerpt" *ngIf="post.excerpt">{{ post.excerpt }}</div>
        <div class="card-meta">
          <span class="pill">{{ post.section }}</span>
          <span class="sep">•</span>
          <span class="mono">/{{ post.slug }}</span>
        </div>
      </div>
    </a>
  </section>

  <nav class="pagination" *ngIf="posts.length > 0 && totalPages > 1">
    <button class="page-btn" type="button" [disabled]="page === 1" (click)="setPage(page - 1)">prev</button>
    <button
      class="page-btn"
      *ngFor="let p of pages"
      type="button"
      [class.active]="p === page"
      (click)="setPage(p)"
    >
      {{ p }}
    </button>
    <button class="page-btn" type="button" [disabled]="page === totalPages" (click)="setPage(page + 1)">next</button>
  </nav>

  <section class="post-empty" *ngIf="posts.length === 0">
    <div class="terminal-shell">
      <div class="terminal-bar">
        <span class="terminal-dot"></span>
        <span class="terminal-dot"></span>
        <span class="terminal-dot"></span>
      </div>
      <div class="terminal-body">
        <div style="font-family: var(--mono); font-size: 13px; color: rgba(255, 255, 255, 0.85);">
          $ query posts --section {{ section }} --status published
        </div>
        <div class="note">No published posts yet. Create one in `/admin/posts` and set status to `published`.</div>
      </div>
    </div>
  </section>
</main>
